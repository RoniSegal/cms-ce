<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">

  <import resource="classpath:businessPortalFunctions-context.xml"/>
  <import resource="classpath:businessPortalDatasource-context.xml"/>

  <bean id="portalRequestService" class="com.enonic.cms.portal.PortalRequestServiceImpl">
  </bean>

  <bean id="livePortalTraceService" class="com.enonic.cms.portal.livetrace.LivePortalTraceServiceImpl">
    <property name="enabled" value="${cms.livePortalTrace.enabled}"/>
    <property name="longestSize" value="${cms.livePortalTrace.longest.size}"/>
    <property name="historySize" value="${cms.livePortalTrace.history.size}"/>
  </bean>
  
  <bean id="pageRequestProcessorFactory" class="com.enonic.cms.portal.processor.PageRequestProcessorFactory"/>

  <bean id="portalAccessService" class="com.enonic.cms.portal.PortalAccessService"/>

  <bean id="portletXsltViewTransformer" class="com.enonic.cms.portal.rendering.viewtransformer.PortletXsltViewTransformer"/>

  <bean id="pageTemplateXsltViewTransformer"
        class="com.enonic.cms.portal.rendering.viewtransformer.PageTemplateXsltViewTransformer"/>

  <bean id="portalSystemFunctionsService" class="com.enonic.cms.portal.rendering.systemfunctions.PortalSystemFunctionsServiceImpl">
  </bean>

  <bean id="loginPagePathResolverService" class="com.enonic.cms.portal.support.LoginPagePathResolverServiceImpl">
  </bean>

  <bean id="siteRedirectHelper" class="com.enonic.cms.portal.SiteRedirectHelper">
    <property name="sitePathResolver" ref="sitePathResolver"/>
  </bean>

  <bean id="pageRendererFactory" class="com.enonic.cms.portal.rendering.PageRendererFactory"/>

  <bean id="windowRendererFactory" class="com.enonic.cms.portal.rendering.WindowRendererFactory"/>

  <bean id="datasourcesContextXmlCreator" class="com.enonic.cms.portal.datasource.context.DatasourcesContextXmlCreator"/>

  <bean id="postProcessInstructionExecutor" class="com.enonic.cms.portal.instruction.PostProcessInstructionExecutorImpl"/>

  <bean id="siteCachesService" class="com.enonic.cms.portal.cache.SiteCachesServiceImpl">
    <property name="pageCacheServiceFactory">
      <bean class="com.enonic.cms.portal.cache.PageCacheServiceFactory">
        <property name="sitePropertiesService" ref="sitePropertiesService"/>
      </bean>
    </property>
    <property name="sitePropertiesService" ref="sitePropertiesService"/>
  </bean>

</beans>